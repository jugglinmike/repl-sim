/*!
 * repl-sim - v0.1.0
 * License: GPL-3.0
 * Date: 2016-08-06
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.replSim=e():t.replSim=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n;n=function(t,e,n){"use strict";function r(t,e){this.el=t,this.submitDelay=e&&e.submitDelay,this.keystrokeDelay=e&&e.keystrokeDelay||l.keystrokeDelay;var i=e&&e.promptRe||l.promptRe,n=e&&e.prepText||l.prepText,r=e&&e.cursorPeriod||l.cursorPeriod,s=e&&e.getHeight||l.getHeight;"number"!=typeof this.submitDelay&&(this.submitDelay=l.submitDelay),this.readDelay=e&&e.readDelay,"number"!=typeof this.readDelay&&(this.readDelay=l.readDelay);var h=t.getAttribute("data-repl-sim");null===h&&(this.el.style.height=s(this.el)+"px",h=n(u(this.el)||""),this.el.setAttribute("data-repl-sim",h)),this._cursor=new o(getComputedStyle(this.el).color,r),this._lines=h.split("\n").map(function(t){var e,n=t.match(i);return n?(e=n[0],{prompt:e,input:t.substring(e.length,t.length)||""}):{output:t}})}var o=i(1),s=i(2),u=i(4),l={promptRe:/^\$ /,cursorPeriod:700,submitDelay:800,readDelay:1e3,getHeight:function(t){return t.clientHeight},keystrokeDelay:function(){return 50+100*Math.random()},prepText:function(t){return t}};r.prototype.destroy=function(){if(this._destroyed)throw new Error("ReplSim: `destroy` called on destroyed instance");this._cursor.hide(),this._destroyed=!0},r.prototype.play=function(){if(this._destroyed)throw new Error("ReplSim: `play` called on destroyed instance");return this.el.textContent="",this.el.appendChild(this._cursor.el),this._lines.reduce(function(t,e,i){return t.then(function(){var t;if(!this._destroyed)return t=document.createTextNode(""),this.el.insertBefore(t,this._cursor.el),"output"in e?(this._cursor.hide(),void(t.textContent=e.output+"\n")):(this._cursor.show(),t.textContent=e.prompt,s(this.readDelay).then(function(){if(!this._destroyed)return this._typeLine(t,e.input)}.bind(this)).then(function(){if(!this._destroyed)return s(this.submitDelay)}.bind(this)).then(function(){this._destroyed||i<this._lines.length-1&&(t.textContent+="\n")}.bind(this)))}.bind(this))}.bind(this),Promise.resolve())},r.prototype._typeLine=function(t,e){var i;if(!this._destroyed)return i=e.split(""),i.reduce(function(e,i){return e.then(function(){if(!this._destroyed)return new Promise(function(e){setTimeout(function(){this._destroyed||(t.textContent+=i),e()}.bind(this),this.keystrokeDelay())}.bind(this))}.bind(this))}.bind(this),Promise.resolve())},n.exports=r}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,n){"use strict";function r(t,e){this.el=document.createElement("span"),this.el.innerHTML="&nbsp;",this.color(t),this.period(e),this._blinking=!1,this._stopRequests=0,this.show()}var o=i(2),s=i(3);r.prototype.show=function(){this.el.style.display="inline",this._blink()},r.prototype.hide=function(){this.el.style.display="none",this._blinking&&(this._blinking=!1,this._stopRequests+=1)},r.prototype.color=function(t){this.el.style.backgroundColor=t},r.prototype.period=function(t){this._period=t},r.prototype._blink=function(){var t;this._blinking||(this._blinking=!0,s(function(){return t="visible"===t?"hidden":"visible",this.el.style.visibility=t,o(this._period)}.bind(this),function(){if(this._stopRequests)return this._stopRequests-=1,!0}.bind(this)))},n.exports=r}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){"use strict";i.exports=function(t){return new Promise(function(e){setTimeout(e,t)})}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){"use strict";i.exports=function n(t,e){return t().then(function(){if(!e())return n(t,e)})}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n;n=function(t,e,i){"use strict";i.exports=function(t){if("innerText"in t)return t.innerText;if(!window.getSelection)throw new Error("getSelection not available");var e,i,n,r=window.getSelection(),o=[];for(i=0,n=r.rangeCount;i<n;++i)o[i]=r.getRangeAt(i);for(r.removeAllRanges(),r.selectAllChildren(t),e=r.toString(),r.removeAllRanges(),i=0,n=o.length;i<n;++i)r.addRange(o[i]);return e}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))}])});
//# sourceMappingURL=repl-sim.min.map